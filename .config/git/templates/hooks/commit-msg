#!/usr/bin/env bash

main() {
	[[ -f .git/MERGE_MODE ]] && exit 0

	local -r commit_message=$(head -1 "$1")
	local -r convetional_commit_regex="^(build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test){1}(\(.+\))?:\s{1}.+[^\.+\s+]\$"

	[[ "$commit_message" =~ $convetional_commit_regex ]] && exit 0

	echo -e "\nInvalid commit message '$commit_message'"
	echo "See https://www.conventionalcommits.org/en/v1.0.0/#summary for more information."
	exit 1
}

main "$@"
